{"version":3,"sources":["webpack:///js/31.bc1148dd.chunk.js","webpack:///./src/main/js/apps/component-measures/details/treemap/MeasureTreemapContainer.js","webpack:///./src/main/js/apps/component-measures/components/Spinner.js?c026***","webpack:///./src/main/js/apps/component-measures/details/treemap/MeasureTreemap.js","webpack:///./src/main/js/components/charts/treemap-breadcrumbs.js","webpack:///./src/main/js/components/charts/treemap.js"],"names":["webpackJsonp","1664","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_react_redux__","__WEBPACK_IMPORTED_MODULE_1__MeasureTreemap__","n","__WEBPACK_IMPORTED_MODULE_2__store_rootReducer__","mapStateToProps","state","component","i","metric","mapDispatchToProps","1709","Spinner","_ref","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","1982","_toConsumableArray","arr","Array","isArray","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_1_d3_scale__","__WEBPACK_IMPORTED_MODULE_2__components_Spinner__","__WEBPACK_IMPORTED_MODULE_3__utils__","__WEBPACK_IMPORTED_MODULE_4__components_charts_treemap__","__WEBPACK_IMPORTED_MODULE_5__api_components__","__WEBPACK_IMPORTED_MODULE_6__helpers_measures__","__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__","__WEBPACK_IMPORTED_MODULE_8__helpers_urls__","__WEBPACK_IMPORTED_MODULE_9__components_workspace_main__","_createClass","defineProperties","target","props","descriptor","key","protoProps","staticProps","_ref2","MeasureTreemap","_React$PureComponent","_temp","_this","_ret","this","_len","arguments","args","_key","getPrototypeOf","apply","concat","fetching","components","breadcrumbs","mounted","fetchComponents","nextProps","componentKey","_this2","metrics","options","s","metricSort","asc","then","r","map","measures","refKey","forEach","measure","shouldUseLeak","indexOf","assign","setState","inner","name","colorMeasure","formatted","type","push","join","color","domain","range","direction","getLevelColorScale","getRatingColorScale","getPercentColorScale","node","_this3","qualifier","openComponent","nextBreadcrumbs","index","findIndex","b","slice","_this4","_this5","colorScale","getScale","items","filter","id","size","tooltip","getTooltip","label","link","height","canBeClicked","onRectangleClick","handleRectangleClick","bind","onReset","handleReset","style","lineHeight","HEIGHT","renderTreemap","PureComponent","2242","d","TreemapBreadcrumbs","__WEBPACK_IMPORTED_MODULE_1__shared_QualifierIcon__","handleItemClick","item","e","preventDefault","renderHome","onClick","href","renderBreadcrumbsItems","title","propTypes","PropTypes","arrayOf","shape","string","isRequired","2243","mostCommitPrefix","strings","sortedStrings","sort","firstString","firstStringLength","lastString","charAt","prefix","substr","prefixTokens","split","lastPrefixPart","Treemap","__WEBPACK_IMPORTED_MODULE_2_d3_hierarchy__","__WEBPACK_IMPORTED_MODULE_3__treemap_breadcrumbs__","__WEBPACK_IMPORTED_MODULE_4__mixins_resize_mixin__","__WEBPACK_IMPORTED_MODULE_5__mixins_tooltips_mixin__","__WEBPACK_IMPORTED_MODULE_6__helpers_l10n__","_extends","source","hasOwnProperty","SIZE_SCALE","clamp","TreemapRect","createClass","displayName","x","number","y","width","fill","func","renderLink","stopPropagation","fontSize","render","tooltipAttrs","data-toggle","data-title","cellStyles","left","top","backgroundColor","cursor","isTextVisible","dangerouslySetInnerHTML","__html","maxWidth","visibility","object","mixins","getInitialState","renderWhenNoData","hierarchy","children","sum","treemap","round","nodes","leaves","prefixLength","rectangles","data","x0","y0","x1","y1"],"mappings":"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","file":"js/31.bc1148dd.chunk.js","sourcesContent":["webpackJsonp([31],{\n\n/***/ 1664:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react_redux__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react_redux___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react_redux__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__MeasureTreemap__ = __webpack_require__(1982);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store_rootReducer__ = __webpack_require__(7);\n/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    component: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__store_rootReducer__[\"getMeasuresAppComponent\"])(state),\n    metric: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__store_rootReducer__[\"getMeasuresAppDetailsMetric\"])(state)\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps() {\n  return {};\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_react_redux__[\"connect\"])(mapStateToProps, mapDispatchToProps)(__WEBPACK_IMPORTED_MODULE_1__MeasureTreemap__[\"a\" /* default */]));\n\n/***/ }),\n\n/***/ 1709:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Spinner;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\nvar _ref = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"spinner spinner-margin\" });\n\nfunction Spinner() {\n  return _ref;\n}\n\n/***/ }),\n\n/***/ 1982:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_scale__ = __webpack_require__(210);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Spinner__ = __webpack_require__(1709);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils__ = __webpack_require__(125);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_charts_treemap__ = __webpack_require__(2243);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__api_components__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__helpers_measures__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__helpers_l10n__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__helpers_urls__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__components_workspace_main__ = __webpack_require__(169);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\n\n\n\n\n\n\n\n\n\nvar HEIGHT = 500;\n\nvar _ref2 = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__components_Spinner__[\"a\" /* default */], null);\n\nvar MeasureTreemap = function (_React$PureComponent) {\n  _inherits(MeasureTreemap, _React$PureComponent);\n\n  function MeasureTreemap() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, MeasureTreemap);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = MeasureTreemap.__proto__ || Object.getPrototypeOf(MeasureTreemap)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      fetching: true,\n      components: [],\n      breadcrumbs: []\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(MeasureTreemap, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var component = this.props.component;\n\n\n      this.mounted = true;\n      this.fetchComponents(component.key);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(nextProps) {\n      if (nextProps.metric !== this.props.metric) {\n        this.fetchComponents(this.props.component.key);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.mounted = false;\n    }\n  }, {\n    key: 'fetchComponents',\n    value: function fetchComponents(componentKey) {\n      var _this2 = this;\n\n      var metric = this.props.metric;\n\n      var metrics = ['ncloc', metric.key];\n      var options = {\n        s: 'metric',\n        metricSort: 'ncloc',\n        asc: false\n      };\n\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__api_components__[\"g\" /* getChildren */])(componentKey, metrics, options).then(function (r) {\n        var components = r.components.map(function (component) {\n          var measures = {};\n          var key = component.refKey || component.key;\n\n          component.measures.forEach(function (measure) {\n            var shouldUseLeak = measure.metric.indexOf('new_') === 0;\n            measures[measure.metric] = shouldUseLeak ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils__[\"c\" /* getLeakValue */])(measure) : measure.value;\n          });\n          return Object.assign({}, component, { measures: measures, key: key });\n        });\n\n        _this2.setState({\n          components: components,\n          fetching: false\n        });\n      });\n    }\n  }, {\n    key: 'getTooltip',\n    value: function getTooltip(component) {\n      var metric = this.props.metric;\n\n\n      var inner = [component.name, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__[\"translate\"])('metric.ncloc.name') + ': ' + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers_measures__[\"formatMeasure\"])(component.measures['ncloc'], 'INT')];\n\n      var colorMeasure = component.measures[metric.key];\n      var formatted = colorMeasure != null ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers_measures__[\"formatMeasure\"])(colorMeasure, metric.type) : '—';\n      inner.push(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__[\"getLocalizedMetricName\"])(metric) + ': ' + formatted);\n      inner = inner.join('<br>');\n      return '<div class=\"text-left\">' + inner + '</div>';\n    }\n  }, {\n    key: 'getPercentColorScale',\n    value: function getPercentColorScale(metric) {\n      var color = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_scale__[\"scaleLinear\"])().domain([0, 25, 50, 75, 100]);\n      color.range(metric.direction === 1 ? ['#d4333f', '#ed7d20', '#eabe06', '#b0d513', '#00aa00'] : ['#00aa00', '#b0d513', '#eabe06', '#ed7d20', '#d4333f']);\n      return color;\n    }\n  }, {\n    key: 'getRatingColorScale',\n    value: function getRatingColorScale() {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_scale__[\"scaleLinear\"])().domain([1, 2, 3, 4, 5]).range(['#00aa00', '#b0d513', '#eabe06', '#ed7d20', '#d4333f']);\n    }\n  }, {\n    key: 'getLevelColorScale',\n    value: function getLevelColorScale() {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_scale__[\"scaleOrdinal\"])().domain(['ERROR', 'WARN', 'OK', 'NONE']).range(['#d4333f', '#ed7d20', '#00aa00', '#b4b4b4']);\n    }\n  }, {\n    key: 'getScale',\n    value: function getScale() {\n      var metric = this.props.metric;\n\n      if (metric.type === 'LEVEL') {\n        return this.getLevelColorScale();\n      }\n      if (metric.type === 'RATING') {\n        return this.getRatingColorScale();\n      }\n      return this.getPercentColorScale(metric);\n    }\n  }, {\n    key: 'handleRectangleClick',\n    value: function handleRectangleClick(node) {\n      var _this3 = this;\n\n      var isFile = node.qualifier === 'FIL' || node.qualifier === 'UTS';\n      if (isFile) {\n        __WEBPACK_IMPORTED_MODULE_9__components_workspace_main__[\"default\"].openComponent({ key: node.key });\n        return;\n      }\n      this.fetchComponents(node.key).then(function () {\n        var nextBreadcrumbs = [].concat(_toConsumableArray(_this3.state.breadcrumbs));\n        var index = _this3.state.breadcrumbs.findIndex(function (b) {\n          return b.key === node.key;\n        });\n        if (index !== -1) {\n          nextBreadcrumbs = nextBreadcrumbs.slice(0, index);\n        }\n        nextBreadcrumbs = [].concat(_toConsumableArray(nextBreadcrumbs), [{\n          key: node.key,\n          name: node.name,\n          qualifier: node.qualifier\n        }]);\n        _this3.setState({ breadcrumbs: nextBreadcrumbs });\n      });\n    }\n  }, {\n    key: 'handleReset',\n    value: function handleReset() {\n      var _this4 = this;\n\n      var component = this.props.component;\n\n      this.fetchComponents(component.key).then(function () {\n        _this4.setState({ breadcrumbs: [] });\n      });\n    }\n  }, {\n    key: 'renderTreemap',\n    value: function renderTreemap() {\n      var _this5 = this;\n\n      var metric = this.props.metric;\n\n      var colorScale = this.getScale();\n      var items = this.state.components.filter(function (component) {\n        return component.measures['ncloc'];\n      }).map(function (component) {\n        var colorMeasure = component.measures[metric.key];\n        return {\n          id: component.id,\n          key: component.key,\n          name: component.name,\n          qualifier: component.qualifier,\n          size: component.measures['ncloc'],\n          color: colorMeasure != null ? colorScale(colorMeasure) : '#777',\n          tooltip: _this5.getTooltip(component),\n          label: component.name,\n          link: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8__helpers_urls__[\"j\" /* getComponentUrl */])(component.key)\n        };\n      });\n      return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4__components_charts_treemap__[\"a\" /* Treemap */], {\n        items: items,\n        breadcrumbs: this.state.breadcrumbs,\n        height: HEIGHT,\n        canBeClicked: function canBeClicked() {\n          return true;\n        },\n        onRectangleClick: this.handleRectangleClick.bind(this),\n        onReset: this.handleReset.bind(this)\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var metric = this.props.metric;\n      var fetching = this.state.fetching;\n\n      if (fetching) {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n          'div',\n          { className: 'measure-details-treemap' },\n          __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { className: 'note text-center', style: { lineHeight: HEIGHT + 'px' } },\n            _ref2\n          )\n        );\n      }\n      return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        { className: 'measure-details-treemap' },\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n          'ul',\n          { className: 'list-inline note measure-details-treemap-legend' },\n          __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'li',\n            null,\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__[\"translateWithParameters\"])('component_measures.legend.color_x', __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__[\"getLocalizedMetricName\"])(metric))\n          ),\n          __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'li',\n            null,\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__[\"translateWithParameters\"])('component_measures.legend.size_x', __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__[\"translate\"])('metric.ncloc.name'))\n          )\n        ),\n        this.renderTreemap()\n      );\n    }\n  }]);\n\n  return MeasureTreemap;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (MeasureTreemap);\n\n/***/ }),\n\n/***/ 2242:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return TreemapBreadcrumbs; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__shared_QualifierIcon__ = __webpack_require__(85);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\n\nvar _ref2 = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('i', { className: 'icon-chevron-right' });\n\nvar TreemapBreadcrumbs = function (_React$PureComponent) {\n  _inherits(TreemapBreadcrumbs, _React$PureComponent);\n\n  function TreemapBreadcrumbs() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, TreemapBreadcrumbs);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = TreemapBreadcrumbs.__proto__ || Object.getPrototypeOf(TreemapBreadcrumbs)).call.apply(_ref, [this].concat(args))), _this), _this.handleItemClick = function (item, e) {\n      e.preventDefault();\n      _this.props.onRectangleClick(item);\n    }, _this.handleReset = function (e) {\n      e.preventDefault();\n      _this.props.onReset();\n    }, _this.renderHome = function () {\n      return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'span',\n        { className: 'treemap-breadcrumbs-item' },\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('a', { onClick: _this.handleReset, className: 'icon-home', href: '#' })\n      );\n    }, _this.renderBreadcrumbsItems = function (b) {\n      return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'span',\n        { key: b.key, className: 'treemap-breadcrumbs-item', title: b.name },\n        _ref2,\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__shared_QualifierIcon__[\"a\" /* default */], { qualifier: b.qualifier }),\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n          'a',\n          { onClick: _this.handleItemClick.bind(_this, b), href: '#' },\n          b.name\n        )\n      );\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(TreemapBreadcrumbs, [{\n    key: 'render',\n    value: function render() {\n      var breadcrumbs = this.props.breadcrumbs.map(this.renderBreadcrumbsItems);\n      return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        { className: 'treemap-breadcrumbs' },\n        this.props.breadcrumbs.length ? this.renderHome() : null,\n        breadcrumbs\n      );\n    }\n  }]);\n\n  return TreemapBreadcrumbs;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent);\nTreemapBreadcrumbs.propTypes = {\n  breadcrumbs: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.arrayOf(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.shape({\n    key: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired,\n    name: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired,\n    qualifier: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired\n  }).isRequired).isRequired\n};\n\n/***/ }),\n\n/***/ 2243:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export TreemapRect */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Treemap; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_scale__ = __webpack_require__(210);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3_hierarchy__ = __webpack_require__(450);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__treemap_breadcrumbs__ = __webpack_require__(2242);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__mixins_resize_mixin__ = __webpack_require__(650);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__mixins_tooltips_mixin__ = __webpack_require__(165);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__helpers_l10n__ = __webpack_require__(2);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\n\n\n\n\n\n\nvar SIZE_SCALE = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_scale__[\"scaleLinear\"])().domain([3, 15]).range([11, 18]).clamp(true);\n\nfunction mostCommitPrefix(strings) {\n  var sortedStrings = strings.slice(0).sort();\n  var firstString = sortedStrings[0];\n  var firstStringLength = firstString.length;\n  var lastString = sortedStrings[sortedStrings.length - 1];\n  var i = 0;\n  while (i < firstStringLength && firstString.charAt(i) === lastString.charAt(i)) {\n    i++;\n  }\n  var prefix = firstString.substr(0, i);\n  var prefixTokens = prefix.split(/[\\s\\\\\\/]/);\n  var lastPrefixPart = prefixTokens[prefixTokens.length - 1];\n  return prefix.substr(0, prefix.length - lastPrefixPart.length);\n}\n\nvar _ref = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span', { className: 'icon-link' });\n\nvar TreemapRect = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n  displayName: 'TreemapRect',\n\n  propTypes: {\n    x: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number.isRequired,\n    y: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number.isRequired,\n    width: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number.isRequired,\n    height: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number.isRequired,\n    fill: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired,\n    label: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired,\n    onClick: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func\n  },\n\n  renderLink: function renderLink() {\n    if (!this.props.link) {\n      return null;\n    }\n\n    if (this.props.width < 24 || this.props.height < 24) {\n      return null;\n    }\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n      'a',\n      {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        className: 'treemap-link',\n        href: this.props.link,\n        style: { fontSize: 12 } },\n      _ref\n    );\n  },\n  render: function render() {\n    var tooltipAttrs = {};\n    if (this.props.tooltip) {\n      tooltipAttrs = {\n        'data-toggle': 'tooltip',\n        'data-title': this.props.tooltip\n      };\n    }\n    var cellStyles = {\n      left: this.props.x,\n      top: this.props.y,\n      width: this.props.width,\n      height: this.props.height,\n      backgroundColor: this.props.fill,\n      fontSize: SIZE_SCALE(this.props.width / this.props.label.length),\n      lineHeight: this.props.height + 'px',\n      cursor: typeof this.props.onClick === 'function' ? 'pointer' : 'default'\n    };\n    var isTextVisible = this.props.width >= 40 && this.props.height >= 40;\n    /* eslint-disable jsx-a11y/onclick-has-focus, jsx-a11y/onclick-has-role */\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n      'div',\n      _extends({\n        className: 'treemap-cell'\n      }, tooltipAttrs, {\n        style: cellStyles,\n        onClick: this.props.onClick }),\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div', {\n        className: 'treemap-inner',\n        dangerouslySetInnerHTML: { __html: this.props.label },\n        style: { maxWidth: this.props.width, visibility: isTextVisible ? 'visible' : 'hidden' }\n      }),\n      this.renderLink()\n    );\n  }\n});\n\nvar _ref2 = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n  'div',\n  null,\n  '\\xA0'\n);\n\nvar Treemap = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n  displayName: 'Treemap',\n\n  propTypes: {\n    items: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.arrayOf(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object).isRequired,\n    height: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number,\n    onRectangleClick: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func\n  },\n\n  mixins: [__WEBPACK_IMPORTED_MODULE_4__mixins_resize_mixin__[\"a\" /* ResizeMixin */], __WEBPACK_IMPORTED_MODULE_5__mixins_tooltips_mixin__[\"b\" /* TooltipsMixin */]],\n\n  getInitialState: function getInitialState() {\n    return { width: this.props.width, height: this.props.height };\n  },\n  renderWhenNoData: function renderWhenNoData() {\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n      'div',\n      { className: 'sonar-d3' },\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        {\n          className: 'treemap-container',\n          style: { width: this.state.width, height: this.state.height } },\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__helpers_l10n__[\"translate\"])('no_data')\n      ),\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__treemap_breadcrumbs__[\"a\" /* TreemapBreadcrumbs */], this.props)\n    );\n  },\n  render: function render() {\n    var _this = this;\n\n    if (!this.state.width || !this.state.height) {\n      return _ref2;\n    }\n\n    if (!this.props.items.length) {\n      return this.renderWhenNoData();\n    }\n\n    var hierarchy = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_d3_hierarchy__[\"hierarchy\"])({ children: this.props.items }).sum(function (d) {\n      return d.size;\n    }).sort(function (a, b) {\n      return b.value - a.value;\n    });\n\n    var treemap = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_d3_hierarchy__[\"treemap\"])().round(true).size([this.state.width, this.state.height]);\n\n    var nodes = treemap(hierarchy).leaves();\n\n    var prefix = mostCommitPrefix(this.props.items.map(function (item) {\n      return item.label;\n    }));\n    var prefixLength = prefix.length;\n\n    var rectangles = nodes.map(function (node) {\n      var key = node.data.label;\n      var label = prefixLength ? prefix + '<br>' + node.data.label.substr(prefixLength) : node.data.label;\n      var onClick = _this.props.canBeClicked(node.data) ? function () {\n        return _this.props.onRectangleClick(node.data);\n      } : null;\n      return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(TreemapRect, {\n        key: key,\n        x: node.x0,\n        y: node.y0,\n        width: node.x1 - node.x0,\n        height: node.y1 - node.y0,\n        fill: node.data.color,\n        label: label,\n        prefix: prefix,\n        tooltip: node.data.tooltip,\n        link: node.data.link,\n        onClick: onClick\n      });\n    });\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n      'div',\n      { className: 'sonar-d3' },\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        {\n          className: 'treemap-container',\n          style: { width: this.state.width, height: this.state.height } },\n        rectangles\n      ),\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__treemap_breadcrumbs__[\"a\" /* TreemapBreadcrumbs */], this.props)\n    );\n  }\n});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/31.bc1148dd.chunk.js","/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport MeasureTreemap from './MeasureTreemap';\nimport {\n  getMeasuresAppDetailsMetric,\n  getMeasuresAppComponent\n} from '../../../../store/rootReducer';\n\nconst mapStateToProps = state => {\n  return {\n    component: getMeasuresAppComponent(state),\n    metric: getMeasuresAppDetailsMetric(state)\n  };\n};\n\nconst mapDispatchToProps = () => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasureTreemap);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/apps/component-measures/details/treemap/MeasureTreemapContainer.js","/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\n\nexport default function Spinner() {\n  return <i className=\"spinner spinner-margin\" />;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/apps/component-measures/components/Spinner.js","/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport { scaleLinear, scaleOrdinal } from 'd3-scale';\nimport Spinner from './../../components/Spinner';\nimport { getLeakValue } from '../../utils';\nimport { Treemap } from '../../../../components/charts/treemap';\nimport { getChildren } from '../../../../api/components';\nimport { formatMeasure } from '../../../../helpers/measures';\nimport {\n  translate,\n  translateWithParameters,\n  getLocalizedMetricName\n} from '../../../../helpers/l10n';\nimport { getComponentUrl } from '../../../../helpers/urls';\nimport Workspace from '../../../../components/workspace/main';\n\nconst HEIGHT = 500;\n\nexport default class MeasureTreemap extends React.PureComponent {\n  state = {\n    fetching: true,\n    components: [],\n    breadcrumbs: []\n  };\n\n  componentDidMount() {\n    const { component } = this.props;\n\n    this.mounted = true;\n    this.fetchComponents(component.key);\n  }\n\n  componentDidUpdate(nextProps) {\n    if (nextProps.metric !== this.props.metric) {\n      this.fetchComponents(this.props.component.key);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchComponents(componentKey) {\n    const { metric } = this.props;\n    const metrics = ['ncloc', metric.key];\n    const options = {\n      s: 'metric',\n      metricSort: 'ncloc',\n      asc: false\n    };\n\n    return getChildren(componentKey, metrics, options).then(r => {\n      const components = r.components.map(component => {\n        const measures = {};\n        const key = component.refKey || component.key;\n\n        component.measures.forEach(measure => {\n          const shouldUseLeak = measure.metric.indexOf('new_') === 0;\n          measures[measure.metric] = shouldUseLeak ? getLeakValue(measure) : measure.value;\n        });\n        return { ...component, measures, key };\n      });\n\n      this.setState({\n        components,\n        fetching: false\n      });\n    });\n  }\n\n  getTooltip(component) {\n    const { metric } = this.props;\n\n    let inner = [\n      component.name,\n      `${translate('metric.ncloc.name')}: ${formatMeasure(component.measures['ncloc'], 'INT')}`\n    ];\n\n    const colorMeasure = component.measures[metric.key];\n    const formatted = colorMeasure != null ? formatMeasure(colorMeasure, metric.type) : '—';\n    inner.push(`${getLocalizedMetricName(metric)}: ${formatted}`);\n    inner = inner.join('<br>');\n    return `<div class=\"text-left\">${inner}</div>`;\n  }\n  getPercentColorScale(metric) {\n    const color = scaleLinear().domain([0, 25, 50, 75, 100]);\n    color.range(\n      metric.direction === 1\n        ? ['#d4333f', '#ed7d20', '#eabe06', '#b0d513', '#00aa00']\n        : ['#00aa00', '#b0d513', '#eabe06', '#ed7d20', '#d4333f']\n    );\n    return color;\n  }\n  getRatingColorScale() {\n    return scaleLinear()\n      .domain([1, 2, 3, 4, 5])\n      .range(['#00aa00', '#b0d513', '#eabe06', '#ed7d20', '#d4333f']);\n  }\n  getLevelColorScale() {\n    return scaleOrdinal()\n      .domain(['ERROR', 'WARN', 'OK', 'NONE'])\n      .range(['#d4333f', '#ed7d20', '#00aa00', '#b4b4b4']);\n  }\n  getScale() {\n    const { metric } = this.props;\n    if (metric.type === 'LEVEL') {\n      return this.getLevelColorScale();\n    }\n    if (metric.type === 'RATING') {\n      return this.getRatingColorScale();\n    }\n    return this.getPercentColorScale(metric);\n  }\n  handleRectangleClick(node) {\n    const isFile = node.qualifier === 'FIL' || node.qualifier === 'UTS';\n    if (isFile) {\n      Workspace.openComponent({ key: node.key });\n      return;\n    }\n    this.fetchComponents(node.key).then(() => {\n      let nextBreadcrumbs = [...this.state.breadcrumbs];\n      const index = this.state.breadcrumbs.findIndex(b => b.key === node.key);\n      if (index !== -1) {\n        nextBreadcrumbs = nextBreadcrumbs.slice(0, index);\n      }\n      nextBreadcrumbs = [\n        ...nextBreadcrumbs,\n        {\n          key: node.key,\n          name: node.name,\n          qualifier: node.qualifier\n        }\n      ];\n      this.setState({ breadcrumbs: nextBreadcrumbs });\n    });\n  }\n  handleReset() {\n    const { component } = this.props;\n    this.fetchComponents(component.key).then(() => {\n      this.setState({ breadcrumbs: [] });\n    });\n  }\n  renderTreemap() {\n    const { metric } = this.props;\n    const colorScale = this.getScale();\n    const items = this.state.components\n      .filter(component => component.measures['ncloc'])\n      .map(component => {\n        const colorMeasure = component.measures[metric.key];\n        return {\n          id: component.id,\n          key: component.key,\n          name: component.name,\n          qualifier: component.qualifier,\n          size: component.measures['ncloc'],\n          color: colorMeasure != null ? colorScale(colorMeasure) : '#777',\n          tooltip: this.getTooltip(component),\n          label: component.name,\n          link: getComponentUrl(component.key)\n        };\n      });\n    return (\n      <Treemap\n        items={items}\n        breadcrumbs={this.state.breadcrumbs}\n        height={HEIGHT}\n        canBeClicked={() => true}\n        onRectangleClick={this.handleRectangleClick.bind(this)}\n        onReset={this.handleReset.bind(this)}\n      />\n    );\n  }\n  render() {\n    const { metric } = this.props;\n    const { fetching } = this.state;\n    if (fetching) {\n      return (\n        <div className=\"measure-details-treemap\">\n          <div className=\"note text-center\" style={{ lineHeight: `${HEIGHT}px` }}>\n            <Spinner />\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"measure-details-treemap\">\n        <ul className=\"list-inline note measure-details-treemap-legend\">\n          <li>\n            {translateWithParameters(\n              'component_measures.legend.color_x',\n              getLocalizedMetricName(metric)\n            )}\n          </li>\n          <li>\n            {translateWithParameters(\n              'component_measures.legend.size_x',\n              translate('metric.ncloc.name')\n            )}\n          </li>\n        </ul>\n        {this.renderTreemap()}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/apps/component-measures/details/treemap/MeasureTreemap.js","/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport QualifierIcon from '../shared/QualifierIcon';\n\nexport class TreemapBreadcrumbs extends React.PureComponent {\n  static propTypes = {\n    breadcrumbs: React.PropTypes.arrayOf(\n      React.PropTypes.shape({\n        key: React.PropTypes.string.isRequired,\n        name: React.PropTypes.string.isRequired,\n        qualifier: React.PropTypes.string.isRequired\n      }).isRequired\n    ).isRequired\n  };\n\n  handleItemClick = (item, e) => {\n    e.preventDefault();\n    this.props.onRectangleClick(item);\n  };\n\n  handleReset = e => {\n    e.preventDefault();\n    this.props.onReset();\n  };\n\n  renderHome = () => {\n    return (\n      <span className=\"treemap-breadcrumbs-item\">\n        <a onClick={this.handleReset} className=\"icon-home\" href=\"#\" />\n      </span>\n    );\n  };\n\n  renderBreadcrumbsItems = b => {\n    return (\n      <span key={b.key} className=\"treemap-breadcrumbs-item\" title={b.name}>\n        <i className=\"icon-chevron-right\" />\n        <QualifierIcon qualifier={b.qualifier} />\n        <a onClick={this.handleItemClick.bind(this, b)} href=\"#\">{b.name}</a>\n      </span>\n    );\n  };\n\n  render() {\n    const breadcrumbs = this.props.breadcrumbs.map(this.renderBreadcrumbsItems);\n    return (\n      <div className=\"treemap-breadcrumbs\">\n        {this.props.breadcrumbs.length ? this.renderHome() : null}\n        {breadcrumbs}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/components/charts/treemap-breadcrumbs.js","/*\n * SonarQube\n * Copyright (C) 2009-2017 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport { scaleLinear } from 'd3-scale';\nimport { treemap as d3Treemap, hierarchy as d3Hierarchy } from 'd3-hierarchy';\nimport { TreemapBreadcrumbs } from './treemap-breadcrumbs';\nimport { ResizeMixin } from './../mixins/resize-mixin';\nimport { TooltipsMixin } from './../mixins/tooltips-mixin';\nimport { translate } from '../../helpers/l10n';\n\nconst SIZE_SCALE = scaleLinear().domain([3, 15]).range([11, 18]).clamp(true);\n\nfunction mostCommitPrefix(strings) {\n  const sortedStrings = strings.slice(0).sort();\n  const firstString = sortedStrings[0];\n  const firstStringLength = firstString.length;\n  const lastString = sortedStrings[sortedStrings.length - 1];\n  let i = 0;\n  while (i < firstStringLength && firstString.charAt(i) === lastString.charAt(i)) {\n    i++;\n  }\n  const prefix = firstString.substr(0, i);\n  const prefixTokens = prefix.split(/[\\s\\\\\\/]/);\n  const lastPrefixPart = prefixTokens[prefixTokens.length - 1];\n  return prefix.substr(0, prefix.length - lastPrefixPart.length);\n}\n\nexport const TreemapRect = React.createClass({\n  propTypes: {\n    x: React.PropTypes.number.isRequired,\n    y: React.PropTypes.number.isRequired,\n    width: React.PropTypes.number.isRequired,\n    height: React.PropTypes.number.isRequired,\n    fill: React.PropTypes.string.isRequired,\n    label: React.PropTypes.string.isRequired,\n    onClick: React.PropTypes.func\n  },\n\n  renderLink() {\n    if (!this.props.link) {\n      return null;\n    }\n\n    if (this.props.width < 24 || this.props.height < 24) {\n      return null;\n    }\n\n    return (\n      <a\n        onClick={e => e.stopPropagation()}\n        className=\"treemap-link\"\n        href={this.props.link}\n        style={{ fontSize: 12 }}>\n        <span className=\"icon-link\" />\n      </a>\n    );\n  },\n\n  render() {\n    let tooltipAttrs = {};\n    if (this.props.tooltip) {\n      tooltipAttrs = {\n        'data-toggle': 'tooltip',\n        'data-title': this.props.tooltip\n      };\n    }\n    const cellStyles = {\n      left: this.props.x,\n      top: this.props.y,\n      width: this.props.width,\n      height: this.props.height,\n      backgroundColor: this.props.fill,\n      fontSize: SIZE_SCALE(this.props.width / this.props.label.length),\n      lineHeight: `${this.props.height}px`,\n      cursor: typeof this.props.onClick === 'function' ? 'pointer' : 'default'\n    };\n    const isTextVisible = this.props.width >= 40 && this.props.height >= 40;\n    /* eslint-disable jsx-a11y/onclick-has-focus, jsx-a11y/onclick-has-role */\n    return (\n      <div\n        className=\"treemap-cell\"\n        {...tooltipAttrs}\n        style={cellStyles}\n        onClick={this.props.onClick}>\n        <div\n          className=\"treemap-inner\"\n          dangerouslySetInnerHTML={{ __html: this.props.label }}\n          style={{ maxWidth: this.props.width, visibility: isTextVisible ? 'visible' : 'hidden' }}\n        />\n        {this.renderLink()}\n      </div>\n    );\n  }\n});\n\nexport const Treemap = React.createClass({\n  propTypes: {\n    items: React.PropTypes.arrayOf(React.PropTypes.object).isRequired,\n    height: React.PropTypes.number,\n    onRectangleClick: React.PropTypes.func\n  },\n\n  mixins: [ResizeMixin, TooltipsMixin],\n\n  getInitialState() {\n    return { width: this.props.width, height: this.props.height };\n  },\n\n  renderWhenNoData() {\n    return (\n      <div className=\"sonar-d3\">\n        <div\n          className=\"treemap-container\"\n          style={{ width: this.state.width, height: this.state.height }}>\n          {translate('no_data')}\n        </div>\n        <TreemapBreadcrumbs {...this.props} />\n      </div>\n    );\n  },\n\n  render() {\n    if (!this.state.width || !this.state.height) {\n      return <div>&nbsp;</div>;\n    }\n\n    if (!this.props.items.length) {\n      return this.renderWhenNoData();\n    }\n\n    const hierarchy = d3Hierarchy({ children: this.props.items })\n      .sum(d => d.size)\n      .sort((a, b) => b.value - a.value);\n\n    const treemap = d3Treemap().round(true).size([this.state.width, this.state.height]);\n\n    const nodes = treemap(hierarchy).leaves();\n\n    const prefix = mostCommitPrefix(this.props.items.map(item => item.label));\n    const prefixLength = prefix.length;\n\n    const rectangles = nodes.map(node => {\n      const key = node.data.label;\n      const label = prefixLength\n        ? `${prefix}<br>${node.data.label.substr(prefixLength)}`\n        : node.data.label;\n      const onClick = this.props.canBeClicked(node.data)\n        ? () => this.props.onRectangleClick(node.data)\n        : null;\n      return (\n        <TreemapRect\n          key={key}\n          x={node.x0}\n          y={node.y0}\n          width={node.x1 - node.x0}\n          height={node.y1 - node.y0}\n          fill={node.data.color}\n          label={label}\n          prefix={prefix}\n          tooltip={node.data.tooltip}\n          link={node.data.link}\n          onClick={onClick}\n        />\n      );\n    });\n\n    return (\n      <div className=\"sonar-d3\">\n        <div\n          className=\"treemap-container\"\n          style={{ width: this.state.width, height: this.state.height }}>\n          {rectangles}\n        </div>\n        <TreemapBreadcrumbs {...this.props} />\n      </div>\n    );\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/components/charts/treemap.js"],"sourceRoot":""}